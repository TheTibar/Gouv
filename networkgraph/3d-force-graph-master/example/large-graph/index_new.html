<head>
  <style> body { margin: 0; } </style>

  <script src="//unpkg.com/3d-force-graph"></script>
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <!--<script src="../../dist/3d-force-graph.js"></script>-->
</head>

<body>

  <div id="3d-graph"></div>

  <script>
    const elem = document.getElementById('3d-graph');
	
	const highlightNodes = new Set();
    const highlightLinks = new Set();
	let hoverNode = null;
	
	
	fetch('../datasets/data_node_links97.json') 
	.then(gData => gData.json())
	.then(gData => {
		//console.log(JSON.stringify(gData));
		gData = JSON.stringify(gData);
		displaygData(gData);
		})
	.catch(error => alert("Erreur : " + error)); 
 
	function displaygData(gData) {
		alert(gData);
		const Graph = ForceGraph3D()
		(document.getElementById('3d-graph'))
		//.jsonUrl('../datasets/blocks.json') //ancienne valeur
		//.jsonUrl('../datasets/data_node_links97.json')
		.graphData(gData)
		.nodeAutoColorBy('user') //ancienne valeur
		.linkDirectionalParticles(link => highlightLinks.has(link) ? 4 : 0) //ajout
		.linkDirectionalParticleWidth(4) //ajout
		.nodeLabel(node => `${node.user}: ${node.description}`)
		.onNodeHover(node => elem.style.cursor = node ? 'pointer' : null) //ancienne valeur
		.onNodeClick(node => window.open(node.description, '_blank'));
	}
/*
    const Graph = ForceGraph3D()(elem)
      //.jsonUrl('../datasets/blocks.json') //ancienne valeur
	  //.jsonUrl('../datasets/data_node_links97.json')
      .nodeAutoColorBy('user') //ancienne valeur
      .linkDirectionalParticles(link => highlightLinks.has(link) ? 4 : 0) //ajout
      .linkDirectionalParticleWidth(4) //ajout
      .nodeLabel(node => `${node.user}: ${node.description}`)
	  .onNodeHover(node => elem.style.cursor = node ? 'pointer' : null) //ancienne valeur
      .onNodeClick(node => window.open(node.description, '_blank'));
	  */


	//console.log(gData);

  </script>
</body>